# Changelog

このプロジェクトの主な変更履歴を記録します。

## 2025-02 (直近の変更)

### 新機能

#### タスク説明の表示改善
- **Markdown レンダリング対応**: タスクの説明をMarkdown形式で表示
- **Read more トグル**: 長い説明文を折りたたみ表示、クリックで展開

#### 実装サマリーの表示
- タスク一覧に実装詳細（PR URL、変更統計、変更ファイル）を表示
- PRの差分統計をメタデータとして記録

#### コスト追跡の改善
- **Anthropic Admin API 対応**: JSON出力パースから Admin API の cost_report エンドポイントに移行
- 実行開始/終了タイムスタンプを記録し、正確なコスト計算を実現

#### X (Twitter) API 連携
- Issue作成時に関連するXの投稿を自動検索
- Claudeが投稿内容を基にIssue説明を自動生成

#### リアルタイム更新
- 10秒ポーリングから GitHub Webhook + SSE に移行
- タスク状態の即座反映

### 改善

#### インフラ・デプロイ
- **Cloud Run 対応**: Dockerfile と standalone 出力を追加
- **Server Actions 移行**: GitHub API呼び出しをServer Actionsに移行（トークン露出防止）

#### PR作成の信頼性向上
- `--head` と `--base` オプションを明示的に指定
- 重複PR作成チェックを追加
- gh api フォールバック対応

#### UI/UX改善
- リポジトリ名をGitHubへのリンクとして表示（下線 + ExternalLink アイコン）
- ステータスフィルターをSelectドロップダウンに変更
- スコアカードで全5ステータスを常時表示
- 待機中タスクに「実装へ進む」ボタンを追加
- ダッシュボードのサマリーとチャートの色を統一

### バグ修正

- タスク同期時のステータス後退を防止（in_progress → queued に戻らないよう対策）
- ローカル追加タスクが同期時に消えないよう修正
- Claude Code ワークフローのデバッグログ改善
- 同一リポジトリ操作には GITHUB_TOKEN を使用（PAT_TOKEN による再トリガー防止）
- jq によるコスト抽出の信頼性向上

### 開発者向け

- `ai-implement` ラベルによるワークフロートリガー
- ラベル付与で自動実装開始、完了後ラベル自動除去
